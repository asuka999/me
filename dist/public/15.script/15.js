webpackJsonp([15],{

/***/ 129:
/***/ function(module, exports, __webpack_require__) {

	var __vue_script__, __vue_template__
	__vue_script__ = __webpack_require__(130)
	if (__vue_script__ &&
	    __vue_script__.__esModule &&
	    Object.keys(__vue_script__).length > 1) {
	  console.warn("[vue-loader] src/components/login.vue: named exports in *.vue files are ignored.")}
	__vue_template__ = __webpack_require__(132)
	module.exports = __vue_script__ || {}
	if (module.exports.__esModule) module.exports = module.exports.default
	if (__vue_template__) {
	(typeof module.exports === "function" ? (module.exports.options || (module.exports.options = {})) : module.exports).template = __vue_template__
	}
	if (false) {(function () {  module.hot.accept()
	  var hotAPI = require("vue-hot-reload-api")
	  hotAPI.install(require("vue"), false)
	  if (!hotAPI.compatible) return
	  var id = "./login.vue"
	  if (!module.hot.data) {
	    hotAPI.createRecord(id, module.exports)
	  } else {
	    hotAPI.update(id, module.exports, __vue_template__)
	  }
	})()}

/***/ },

/***/ 130:
/***/ function(module, exports, __webpack_require__) {

	'use strict';
	
	Object.defineProperty(exports, "__esModule", {
	  value: true
	});
	
	var _user = __webpack_require__(182);
	
	var _user2 = _interopRequireDefault(_user);
	
	function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }
	
	exports.default = {
	  props: ['share$'],
	  methods: {
	    login: function login() {
	      var _this = this;
	
	      _user2.default.login(this.u).then(function (data) {
	        _this.$dispatch('login', data);
	        _this.$router.go({ path: '/' });
	      }).catch(function (res) {
	        _this.err = res.data.message + ' : 密码错误';
	      });
	    }
	  },
	  data: function data() {
	    return {
	      u: {},
	      err: undefined
	    };
	  }
	};
	// </script>
	/* generated by vue-loader */
	// <template>
	//   <div class="login">
	//     <div class="err" v-text="err"></div>
	//     <div><input type="text" class="ui" v-model="u.name" placeholder="username"></div>
	//     <div><input type="password" class="ui" v-model="u.password" placeholder="password"></div>
	//     <span class="ui" v-on:click="login">确定</span>
	//   </div>
	// </template>
	//
	// <script>

/***/ },

/***/ 132:
/***/ function(module, exports) {

	module.exports = "\n<div class=\"login\">\n  <div class=\"err\" v-text=\"err\"></div>\n  <div><input type=\"text\" class=\"ui\" v-model=\"u.name\" placeholder=\"username\"></div>\n  <div><input type=\"password\" class=\"ui\" v-model=\"u.password\" placeholder=\"password\"></div>\n  <span class=\"ui\" v-on:click=\"login\">确定</span>\n</div>\n";

/***/ },

/***/ 182:
/***/ function(module, exports, __webpack_require__) {

	'use strict';
	
	Object.defineProperty(exports, "__esModule", {
	  value: true
	});
	
	var _promise = __webpack_require__(81);
	
	var _promise2 = _interopRequireDefault(_promise);
	
	var _util = __webpack_require__(99);
	
	function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }
	
	exports.default = {
	  theme: function theme() {
	    return new _promise2.default(function (resolve, reject) {
	      (0, _util.$http)('/theme', {
	        load: function load(res) {
	          res.status == 200 ? resolve(res.data.data) : reject(res);
	        },
	
	        error: reject
	      });
	    });
	  },
	  login: function login(user) {
	
	    return new _promise2.default(function (resolve, reject) {
	      (0, _util.$http)({
	        method: 'POST',
	        url: '/login',
	        data: user,
	        load: function load(res) {
	          res.status == 200 ? resolve(res.data.data) : reject(res);
	        }
	      });
	    });
	  },
	  insertImg: function insertImg(file) {
	    return new _promise2.default(function (resolve, reject) {
	      var fd = new FormData();
	      fd.append('file', file);
	      fd.append('token', token);
	      (0, _util.$http)({
	        method: 'POST',
	        url: "http://upload.qiniu.com",
	        data: fd,
	        load: function load(res) {
	
	          res.status == 200 ? resolve(res.data.url) : reject(res);
	        },
	        error: reject
	      });
	    }).then(function (url) {
	      return new _promise2.default(function (resolve, reject) {
	        (0, _util.$http)({
	          method: 'post',
	          url: '/user/img',
	          data: url,
	          load: function load(res) {
	            console.log('insert img', res);
	            res.status == 200 ? resolve(res.data.msg) : reject(res);
	          }
	        });
	      });
	    });
	  },
	  deleteImg: function deleteImg(img) {
	    return new _promise2.default(function (resolve, reject) {
	      (0, _util.$http)({
	        method: 'delete',
	        url: '/user/img',
	        data: img,
	        load: function load(res) {
	          console.log('delete img', res);
	          res.status == 200 ? resolve(res.data.msg) : reject(res);
	        }
	      });
	    });
	  },
	  profile: function profile(p) {
	    return new _promise2.default(function (resolve, reject) {
	      (0, _util.$http)({
	        method: 'delete',
	        url: '/user/profile',
	        data: p,
	        load: function load(res) {
	          console.log('profile', res);
	          res.status == 200 ? resolve(res.data.msg) : reject(res);
	        }
	      });
	    });
	  }
	};

/***/ }

});
//# sourceMappingURL=15.js.map